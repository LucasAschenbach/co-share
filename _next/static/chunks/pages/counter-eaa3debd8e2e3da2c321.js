(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{4201:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Z}});var n=t(4246),o=t(7378),s=t(6610),c=t(3349),p=t(5991),r=t(5255),m=t(6089),k=t(7608),N=t(6156),u=t(3128),l=t(9148);function d(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,k.Z)(e);if(a){var o=(0,k.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,m.Z)(this,t)}}var i=function(e){(0,r.Z)(t,e);var a=d(t);function t(e){var n;return(0,s.Z)(this,t),n=a.call(this),(0,N.Z)((0,c.Z)(n),"subscriber",u.Subscriber.create(t,(function(e,a,t){return a(n.state.getState().counter)}))),(0,N.Z)((0,c.Z)(n),"state",void 0),(0,N.Z)((0,c.Z)(n),"increase",u.Action.create((0,c.Z)(n),"incr",(function(e){n.increase.publishTo(null==e?{to:"all"}:{to:"all-except-one",except:e}),n.state.setState({counter:n.state.getState().counter+1})}))),n.state=(0,l.Z)((function(){return{counter:e}})),n}return(0,p.Z)(t,[{key:"onUnlink",value:function(e){}},{key:"onLink",value:function(e){}}]),t}(u.Store),f=t(4671),y=t(8077),b=t(7982),h=t(1655),w=t(7375),g=t(3905);function S(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?S(Object(t),!0).forEach((function(a){(0,N.Z)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var x={};function j(e){var a=e.components,t=(0,w.Z)(e,["components"]);return(0,g.kt)("wrapper",v(v(v({},x),t),{},{components:a,mdxType:"MDXLayout"}),(0,g.kt)("h1",null,"Counter Example"),(0,g.kt)("p",null,"A simple counter, right?",(0,g.kt)("br",{parentName:"p"}),"\n","Not quite!",(0,g.kt)("br",{parentName:"p"}),"\n","Behind this simple application is a whole system with a server and two (simulated) clients, that share the value of the counter!  "),(0,g.kt)("p",null,"Let's see how it works ..."),(0,g.kt)("pre",v({},{className:"language-typescript"}),(0,g.kt)("code",v({parentName:"pre"},{className:"language-typescript"}),(0,g.kt)("span",v({parentName:"code"},{className:"token keyword module"}),"export")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"class")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token class-name"}),(0,g.kt)("span",v({parentName:"span"},{className:"token maybe-class-name"}),"CounterStore"))," ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"extends")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token class-name"}),(0,g.kt)("span",v({parentName:"span"},{className:"token maybe-class-name"}),"Store"))," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"public")," subscriber",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token maybe-class-name"}),"Subscriber")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"=")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token maybe-class-name"}),"Subscriber"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token method function property-access"}),"create"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token maybe-class-name"}),"CounterStore"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),",")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),"connection",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),",")," accept",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),",")," deny",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token arrow operator"}),"=>"),"\n        ",(0,g.kt)("span",v({parentName:"code"},{className:"token function"}),"accept"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"this"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token property-access"}),"state"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token method function property-access"}),"getState"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token property-access"}),"counter"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),"\n\n    ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"public")," state",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token maybe-class-name"}),"StoreApi"),(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"<"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{")," counter",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token builtin"}),"number")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}"),(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),">"),"\n\n    ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"public")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token function"}),"onUnlink"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),"link",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token maybe-class-name"}),"StoreLink"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"void")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n    ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"public")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token function"}),"onLink"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),"link",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token maybe-class-name"}),"StoreLink"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"void")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n    ",(0,g.kt)("span",v({parentName:"code"},{className:"token function"}),"constructor"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),"value",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token builtin"}),"number"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"super"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),"\n        ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"this"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token property-access"}),"state")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"=")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token function"}),"create"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token arrow operator"}),"=>")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{")," counter",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," value ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n    increase ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"=")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token maybe-class-name"}),"Action"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token method function property-access"}),"create"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"this"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),",")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token string"}),'"incr"'),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),",")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),"origin",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token arrow operator"}),"=>")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"this"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token property-access"}),"increase"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token method function property-access"}),"publishTo"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),"origin ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"==")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword null nil"}),"null")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"?")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{")," to",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token string"}),'"all"')," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{")," to",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token string"}),'"all-except-one"'),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),",")," except",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," origin ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),"\n        ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"this"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token property-access"}),"state"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token method function property-access"}),"setState"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{"),"\n            counter",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"this"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token property-access"}),"state"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token method function property-access"}),"getState"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token property-access"}),"counter")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"+")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token number"}),"1"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),","),"\n        ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),"\n",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),(0,g.kt)("pre",v({},{className:"language-typescript"}),(0,g.kt)("code",v({parentName:"pre"},{className:"language-typescript"}),(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"function")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token function"}),(0,g.kt)("span",v({parentName:"span"},{className:"token maybe-class-name"}),"CounterExamplePage")),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{")," rootStore ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}"),(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{")," rootStore",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),":")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token maybe-class-name"}),"RootStore")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"const")," store ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"=")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token function"}),"useChildStore"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),"rootStore",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),",")," rootStore",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token property-access"}),"links"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"["),(0,g.kt)("span",v({parentName:"code"},{className:"token number"}),"0"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"]"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),",")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token maybe-class-name"}),"CounterStore"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),",")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token number"}),"1000"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),",")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token string"}),'"counter"'),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"const")," useStoreState ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"=")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token function"}),"useMemo"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token arrow operator"}),"=>")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token function"}),"create"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),"store",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token property-access"}),"state"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),",")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"["),"store",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"]"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),"\n\n    ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword"}),"const")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{")," counter ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"=")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token function"}),"useStoreState"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),"\n\n    ",(0,g.kt)("span",v({parentName:"code"},{className:"token keyword control-flow"}),"return")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),"\n        ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"<"),"div className",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"="),(0,g.kt)("span",v({parentName:"code"},{className:"token string"}),'"d-flex flex-row align-items-center"'),(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),">"),"\n            ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"<"),"h1 className",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"="),(0,g.kt)("span",v({parentName:"code"},{className:"token string"}),'"mx-3"'),(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),">"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{"),"counter",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}"),(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"<"),(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"/"),"h1",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),">"),"\n            ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"<"),"button className",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"="),(0,g.kt)("span",v({parentName:"code"},{className:"token string"}),'"m-1 btn btn-outline-primary"')," onClick",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"="),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"{"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")")," ",(0,g.kt)("span",v({parentName:"code"},{className:"token arrow operator"}),"=>")," store",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"."),(0,g.kt)("span",v({parentName:"code"},{className:"token method function property-access"}),"increase"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"("),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}"),(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),">"),"\n                ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"+"),"\n            ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"<"),(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"/"),"button",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),">"),"\n        ",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"<"),(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),"/"),"div",(0,g.kt)("span",v({parentName:"code"},{className:"token operator"}),">"),"\n    ",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),")"),"\n",(0,g.kt)("span",v({parentName:"code"},{className:"token punctuation"}),"}"),"\n")))}j.isMDXComponent=!0;var O=t(9138);function Z(){return(0,n.jsxs)("div",{className:"d-flex flex-column fullscreen",children:[(0,n.jsx)(h.h,{selectedIndex:0}),(0,n.jsxs)("div",{className:"d-flex flex-column justify-content-stretch container-lg",children:[(0,n.jsx)("div",{className:"d-flex flex-row-responsive",children:(0,n.jsx)(b.X,{twoClients:!0,initStore:function(e){return e.addChildStore(new i(0),!1,"counter")},children:function(e){return(0,n.jsx)(C,{rootStore:e})}})}),(0,n.jsx)("div",{className:"p-3 flex-basis-0 flex-grow-1",children:(0,n.jsx)(j,{})})]}),(0,n.jsx)(O.$,{})]})}function C(e){var a=e.rootStore,t=(0,y.useChildStore)(a,a.links[0],i,1e3,"counter"),s=(0,o.useMemo)((function(){return(0,f.Z)(t.state)}),[t])().counter;return(0,n.jsxs)("div",{className:"p-3 d-flex flex-row align-items-center",children:[(0,n.jsx)("h1",{className:"mx-3",children:s}),(0,n.jsx)("button",{className:"m-1 btn btn-outline-primary",onClick:function(){return t.increase()},children:"+"})]})}},7017:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/counter",function(){return t(4201)}])},4671:function(e,a,t){"use strict";var n=t(7378);function o(e){let a;const t=new Set,n=(e,n)=>{const o="function"===typeof e?e(a):e;if(o!==a){const e=a;a=n?o:Object.assign({},a,o),t.forEach((t=>t(a,e)))}},o=()=>a,s={setState:n,getState:o,subscribe:(e,n,s)=>n||s?((e,n=o,s=Object.is)=>{let c=n(a);function p(){const t=n(a);if(!s(c,t)){const a=c;e(c=t,a)}}return t.add(p),()=>t.delete(p)})(e,n,s):(t.add(e),()=>t.delete(e)),destroy:()=>t.clear()};return a=e(n,o,s),s}const s="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?n.useEffect:n.useLayoutEffect;a.Z=function(e){const a="function"===typeof e?o(e):e,t=(e=a.getState,t=Object.is)=>{const[,o]=(0,n.useReducer)((e=>e+1),0),c=a.getState(),p=(0,n.useRef)(c),r=(0,n.useRef)(e),m=(0,n.useRef)(t),k=(0,n.useRef)(!1),N=(0,n.useRef)();let u;void 0===N.current&&(N.current=e(c));let l=!1;(p.current!==c||r.current!==e||m.current!==t||k.current)&&(u=e(c),l=!t(N.current,u)),s((()=>{l&&(N.current=u),p.current=c,r.current=e,m.current=t,k.current=!1}));const d=(0,n.useRef)(c);return s((()=>{const e=()=>{try{const e=a.getState(),t=r.current(e);m.current(N.current,t)||(p.current=e,N.current=t,o())}catch(e){k.current=!0,o()}},t=a.subscribe(e);return a.getState()!==d.current&&e(),t}),[]),l?u:N.current};return Object.assign(t,a),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[t,a];return{next(){const a=e.length<=0;return{value:e.shift(),done:a}}}},t}},9148:function(e,a){"use strict";a.Z=function(e){let a;const t=new Set,n=(e,n)=>{const o="function"===typeof e?e(a):e;if(o!==a){const e=a;a=n?o:Object.assign({},a,o),t.forEach((t=>t(a,e)))}},o=()=>a,s={setState:n,getState:o,subscribe:(e,n,s)=>n||s?((e,n=o,s=Object.is)=>{let c=n(a);function p(){const t=n(a);if(!s(c,t)){const a=c;e(c=t,a)}}return t.add(p),()=>t.delete(p)})(e,n,s):(t.add(e),()=>t.delete(e)),destroy:()=>t.clear()};return a=e(n,o,s),s}}},function(e){e.O(0,[345,839,774,888,179],(function(){return a=7017,e(e.s=a);var a}));var a=e.O();_N_E=a}]);